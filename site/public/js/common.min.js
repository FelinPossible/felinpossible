hash="";ancreExpr=RegExp("^#ancre.*","g");function init(){initPage();initLinks();window.onresize=resizeIframe}function initPage(){interval=setInterval(function(){var a=window.location.hash;a!=hash&&(hash=a,""!=hash&&callAjax(hash))},200);$("a[rel=ajax]").click(function(){setHash(this.hash);callAjax(this.hash)});$(window).resize(handleResize);handleResize()}function removeHash(a){"#"==a.charAt(0)&&(a=a.substring(1));return a}function setHash(a){hash=a;window.location.hash=a}
function handleResize(){980>$(window).width()?($("#main-menu").removeClass("span3"),$("#main-menu").addClass("span4"),$("#main-content").removeClass("span9"),$("#main-content").addClass("span8")):($("#main-menu").removeClass("span4"),$("#main-menu").addClass("span3"),$("#main-content").removeClass("span8"),$("#main-content").addClass("span9"))}
function initLinks(){$("div.accordion-inner > ul.nav > li").click(function(a){a.preventDefault();$("ul.nav > li").removeClass("active");$(this).addClass("active")})}
function callAjax(a,b,d,e){if(!ancreExpr.test(a)){var b=b||"corps",c=$("#"+(d||"chargementCorps")),f=$("#"+b);$.ajax({type:e?"POST":"GET",data:$("#"+e).serialize(),url:removeHash(a),beforeSend:function(){scrollToContent();f.hide();c.fadeIn("medium")},success:function(a){deleteWidgets(b);f.html(a);try{dojo.parser.parse(b)}catch(c){}},error:function(a,b,c){console.error("HTTP status code: ",a.status,"Message: ",c);f.html(a.responseText)},complete:function(){resizeIframe();c.hide();f.fadeIn("medium")}})}}
function scrollToContent(){var a=$("#main-content").offset().top;a-$(window).scrollTop()>window.innerHeight&&$("html, body").animate({scrollTop:a},"medium")}
function deleteWidgets(a){try{for(var b=document.getElementById(a).getElementsByTagName("*"),d=0,e="",c=null,f=[];d<b.length;)e=b[d].id,(c=dijit.byId(e))&&f.push(c),d++;for(c=f.pop();c;){if(c.destroy)try{c.destroyRecursive()}catch(h){}c=f.pop()}var g=document.getElementById(a);if(g.hasChildNodes())for(;1<=g.childNodes.length;)g.removeChild(g.firstChild)}catch(i){}}
function resizeIframe(){var a=document.getElementById("framePerdusTrouves");if(a){var b=document.documentElement.clientHeight,b=b-a.offsetTop;a.style.height=b-20+"px"}}function popoverAction(a,b){var d=$("#"+a),e=$("#load"+a),c=d.parent().find(".popover:first").hasClass("in");$("[rel=popover]").popover("destroy");c||$.ajax({type:"GET",url:b,cache:!0,dataType:"html",beforeSend:function(){e.show()},success:function(a){d.attr("data-content",a);e.hide();d.popover("show")}})}
function popoverClose(a){$("#"+a).popover("destroy")};